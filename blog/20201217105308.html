<!DOCTYPE html>
<html>
  <head>
    <!-- meta --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="icon" type="image/x-icon" href="/images/logo.png">
<link rel="stylesheet" type="text/css" href="/css/common.css">

<script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-FTCP0SKTW5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FTCP0SKTW5');
</script>

<title> Local variables  - C Language Zemi -  All Examples are support C99 C Language</title>
<meta name="description" content="I will explain about local variables in C language. Local variables are variables declared inside a function.">
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@perlzemi" />
<meta name="twitter:title" content=" Local variables  - C Language Zemi -  All Examples are support C99 C Language" />
<meta name="twitter:description" content="I will explain about local variables in C language. Local variables are variables declared inside a function." />
<meta name="twitter:image" content="https://en.c.perlzemi.com/images/twitter_card_large_kaeru.png" />


  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header_main">
  <h1>
    <a href="/"><img src="/images/logo.png">C Language Zemi</a>
  </h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    
  </div>
  <div class="middle">
    <div class = "bread">
  <ul itemscope itemtype = "http://schema.org/BreadcrumbList">
    <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">
      <a itemprop="item" href="/">
        <span itemprop = "name"> C language </span>
     </a>
      <meta itemprop = "position" content = "1" />
    </li>
    <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">
      <a itemprop="item" href="/syntax.html">
        <span itemprop = "name"> Basic grammar </span>
     </a>
      <meta itemprop = "position" content = "2" />
    </li>
    <li>
      here
    </li>
  </ul>
</div>
<h2><a href="/blog/20201217105308.html"> Local variables </a></h2>
<p>
  I will explain about local variables in C language. Local variables are variables declared inside a function.
</p>
<div style="width:calc(100% - 30px);margin:10px auto;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
       crossorigin="anonymous"></script>
  <!-- 最初の段落下 - ディスプレイ 横長 レスポンシブ -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4525414114581084"
       data-ad-slot="2828858335"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


<h3> Declaration of local variables </h3>
<p>
  Variables are declared with the following syntax.
</p>
<pre>
Type name Variable name;
</pre>
<p>
  Variable declarations written in functions are declarations of local variables.
</p>
<pre>
int main (void) {
  Type name Variable name;
}
</pre>
<p>
  Let's write a sample that declares a variable of type int32_t.
</p>
<pre>
#include &lt;stdint.h&gt;

int main (void) {
  int32_t num;
}
</pre>
<h3> Initialization of local variables </h3>
<p>
  Variable declarations can be made at the same time as variable initialization.
</p>
<pre>
#include &lt;stdint.h&gt;

int main (void) {
  int32_t num = 1;
}
</pre>
<p>
  Note that in C, if you do not initialize the variable, it will not be automatically initialized to 0 and the value will be undefined.
</p>
<p>
  <a href="https://perlzemi.com/blog/20161107147852.html"> For Perl variables</a>, <a href="https://perlzemi.com/blog/20100220126425.html"> The difference is that it is initialized with the undefined value undef</a>.
</p>
<h3> Scope of local variables </h3>
<p>
  I will write about the <a href="/blog/20210311085419.html"> scope</a> of local variables in C language. In C language, the scope can be described using "{}". You can make variable declarations within the scope. Variables can only be referenced within scope. You can only use scopes inside functions.
</p>
<pre>
#include &lt;stdint.h&gt;

int main (void) {
  {
    int32_t num1;
    
    1 + 1;
    
    int32_t num2;
  }
}
// You cannot see num1 and num2 at this position.
</pre>
<h3> Local variable declaration is possible at any position from C99 </h3>
<p>
  From <a href="/blog/20201206125815.html"> C99</a>, you can declare local variables at any position. The restriction that the declaration of a local variable must be at the beginning of the block is removed.
</p>
<pre>
#include &lt;stdint.h&gt;

int main (void) {
  {
    int32_t num1 = 5;
    
    1 + 1;
    
    // Local variables can be declared at any position
    int32_t num2 = 4;
  }
}
</pre>
<h3> const modifier </h3>
<p>
  You can use the const modifier on a local variable to prohibit assignment to a local variable other than initialization. This raises a compile-time error.
</p>
<pre>
#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;

int main (void) {
  const int32_t num = 1;
  
  // Compile error
  num = 2;
}
</pre>
<h4> constant char * </h4> for expressing a character string
<p>
  const is often used when you want to prevent assignments to string elements.
</p>
<p>
  <a href="/blog/20201208125815.html"> I wrote about the type "const char *" as the type that expresses a character string</a>.
</p>
<pre>
// A type that represents a string
const char * message = "Hello";
</pre>
<p>
  Here, I will explain the role of const in detail. const is a syntax for prohibiting assignment. So what kind of assignment is prohibited in "const char *"?
</p>
<p>
  It's easy to misunderstand, but it doesn't mean that assignment to "message" is prohibited. This is ok.
</p>
<pre>
// OK
message = "Goodby";
</pre>
<p>
  Actually, the const here depends on the pointer "*". In other words, it means prohibiting assignment to the element pointed to by the pointer.
</p>
<pre>
// Compile error
message [3] ='a';
</pre>
<p>
  It doesn't make much sense, but if you want to prohibit assignments to variables, write: In this case const depends on the variable name. Check where it is.
</p>
<pre>
char * const message = "Hello";
</pre>
<h4> const can be removed by casting </h4>
<p>
  const can be removed with <a href="/blog/20210217081559.html"> typecast</a>. "Eh".
</p>
<pre>
char * message2 = (char *) message;
</pre>
<p>
  This means that const modification only means reducing mistakes. Still, you can explicitly indicate that you're using it as a string constant, and it's easy to make mistakes, so it's better to add const.
</p>
<h4> Representing an array of strings </h4>
<p>
  Now, I would like to introduce another scene where const is used. This is how to create an array that cannot change the elements that include the constant string.
</p>
<pre>
#include &lt;stdio.h&gt;

int main (void) {
  
  const char * constant strings [] = {
    "Apple",
    "Orange",
    "Grape",
  };;

  printf("%s%s\n", strings [0], strings [1]);
}
</pre>
<p>
  Where does const depend? Hmmm. Difficult to understand.
</p>
<pre>
const char * const strings []
</pre>
<p>
  The first const "const char *" will be where the pointer points. In other words, prohibition of assignment of character strings to elements.
</p>
<p>
  What's next? "Const strings []". Well, writing the answer prohibits assigning to variables and also to elements of arrays. Why? I don't know.
</p>
<p>
  Please note that the functions of static introduced next and const introduced just now are completely different. It's easy to get confused because the atmosphere is similar.
</p>
<h3> Static local variables </h3>
<p>
  In C, you can declare static local variables by adding the static qualifier to local variables.
</p>
<pre>
int foo (void) {
  // Static local variables
  static int32_t foo;
  
  static int32_t bar = -5;
}
</pre>
<p>
  It's called a static local variable, but when you think about its actual role, it's better to think of it as a scoped global variable.
</p>
<p>
  The lifespan is from the beginning to the end of the program, but you can have a scope to prevent direct access from outside the scope.
</p>
<p>
  Static local variables, like global variables, are initialized with 0 (all bits are 0). If you write a constant on the right side of the assignment operator, it will be initialized with that value.
</p>
<p>
  Note that the assignment in the initialization of the static declaration is done only once at the beginning of the program. The initial value is not assigned each time the function is executed.
</p>
<h4> Sample static local variables </h4>
<p>
  This is a sample of static local variables. Notice that static local variables exist from the beginning to the end of the program.
</p>
<pre>
#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

void foo (void) {
  static int32_t num = -5;
  
  num ++;
  
  printf("%d\n", num);
}

int main (void) {
  foo ();
  foo ();
  foo ();
  foo ();
  foo ();
}
</pre>
<p>
  This is the output result.
</p>
<pre>
-Four
-3
-2
-1
0
</pre>

  </div>
  <div class="bottom">
    <h3>Associated Information</h3>

<div style="margin:10px 0">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="9163995495"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

  </div>
</div>

        </div>
        <div class="side">
          <div style="margin-bottom:30px">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<!-- ディスプレイ縦長 --><ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="4544919209"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

<div style="margin-bottom:30px;padding:0 8px;">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="9163995495"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

        </div>
      </div>
      <div class="footer">
        <div style="font-size:16px;padding:30px 0;background:#fcfcfc;">
  This site is originally Japanese.<br>
  Perl Club starts to translate it to English.<br>
  If you find wrong expressions, you can report them using <a rel="nofollow" href="https://github.com/yuki-kimoto/en_c/issues">Github Issue</a>. 
</div>
<div class="perlri_link">
  <a rel="nofollow" href="https://perlclub.net/en">Perl Club</a>
</div>

      </div>
    </div>
  </body>
</html>
