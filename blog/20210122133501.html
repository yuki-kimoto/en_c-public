<!DOCTYPE html>
<html>
  <head>
    <!-- meta -->
<!-- Google Automatic Advertising -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="icon" type="image/x-icon" href="/images/logo.png">
<link rel="stylesheet" type="text/css" href="/css/common.css">

<script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-FTCP0SKTW5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FTCP0SKTW5');
</script>

<title> switch statement --fast conditional branching of integers  - C Language Zemi -  All Examples are support C99 C Language</title>
<meta name="description" content="You can use a switch statement to perform fast conditional branching of integers.">
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@perlzemi" />
<meta name="twitter:title" content=" switch statement --fast conditional branching of integers  - C Language Zemi -  All Examples are support C99 C Language" />
<meta name="twitter:description" content="You can use a switch statement to perform fast conditional branching of integers." />
<meta name="twitter:image" content="https://en.c.perlzemi.com/images/twitter_card_large_kaeru.png" />


  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header_main">
  <h1>
    <a href="/"><img src="/images/logo.png">C Language Zemi</a>
  </h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    
  </div>
  <div class="middle">
    <div class = "bread">
  <ul itemscope itemtype = "http://schema.org/BreadcrumbList">
    <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">
      <a itemprop="item" href="/">
        <span itemprop = "name"> C language </span>
     </a>
      <meta itemprop = "position" content = "1" />
    </li>
    <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">
      <a itemprop="item" href="/syntax.html">
        <span itemprop = "name"> Basic grammar </span>
     </a>
      <meta itemprop = "position" content = "2" />
    </li>
    <li>
      here
    </li>
  </ul>
</div>
<h2><a href="/blog/20210122133501.html"> switch statement --fast conditional branching of integers </a></h2>
<p>
  You can use a switch statement to perform fast conditional branching of integers.
</p>
<div style="width:calc(100% - 30px);margin:10px auto;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
       crossorigin="anonymous"></script>
  <!-- 最初の段落下 - ディスプレイ 横長 レスポンシブ -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4525414114581084"
       data-ad-slot="2828858335"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


<pre>
switch (value) {
  case Case 1 value:
    // Process 1
    break;
  case Case 2 value:
    // Process 2
    break;
  case Case 3 value:
    // Process 3
    break;
  default: default:
    // Processing in cases other than the above
}
</pre>
<p>
  The break statement is not required, but if there is no break, the statement below is executed without moving outside the switch statement.
</p>
<pre>
switch (value) {
  case Case 1 value:
  case Case 2 value:
    // Processing for case 1 or case 2
    break;
  case Case 3 value:
    // Process 3
    break;
  default: default:
    // Processing in cases other than the above
}
</pre>
<p>
  Forgetting to write a break statement occurs frequently, empirically speaking. It seems that I forgot to write the break statement when I thought, "Oh, it's strange, the behavior of the program is too mysterious."
</p>
<p>
  In the processing of each case of the switch statement, there are many cases where you want to declare variables, so if you want to declare variables, it is better to create a scope as follows.
</p>
<pre>
switch (value) {
  case Case 1 value: {
    // Process 1
    break;
  }
  case Case 2 value: {
    // Process 2
    break;
  }
  case Case 3 value: {
    // Process 3
    break;
  }
  default: {
    // Processing in cases other than the above
  }
}
</pre>
<p>
  This is a sample using a switch statement. It is used in combination with <a href="/blog/20210120133501.html"> enumeration type</a>.
</p>
<pre>
#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;

enum {
  SPVM_OP_C_ID_IF,
  SPVM_OP_C_ID_UNLESS,
  SPVM_OP_C_ID_ELSIF,
  SPVM_OP_C_ID_ELSE,
  SPVM_OP_C_ID_FOR,
};;

int main (void) {
  
  int32_t id = SPVM_OP_C_ID_UNLESS;
  
  switch (id) {
    case SPVM_OP_C_ID_IF: {
      printf("IF\n");
      break;
    }
    case SPVM_OP_C_ID_UNLESS: {
      printf("UNLESS\n");
      break;
    }
    case SPVM_OP_C_ID_ELSIF: {
      printf("ELSIF\n");
      break;
    }
    case SPVM_OP_C_ID_ELSE: {
      printf("ELSE\n");
      break;
    }
    case SPVM_OP_C_ID_FOR: {
      printf("FOR\n");
      break;
    }
    default: {
      printf("No Match\n");
    }
  }
}
</pre>
<h3> What is the internal implementation of the switch statement? </h3>
<p>
  Imagine that two types of jump tables are selectively used by the integer pattern.
</p>
<h4> When the range of integers is small </h4>
<p>
  The jump destination addresses are arranged at consecutive integer positions and can be jumped with the amount of calculation O (1).
</p>
<pre>
5 0x1235
6 0x4568
7 NULL
8 NULL
9 0x3289
</pre>
<h4> When the range of integers is large </h4>
<p>
  The jump destination addresses are arranged in ascending order so that binary search is possible, and you can jump with the amount of calculation O (log n).
</p>
<pre>
5 0x1237
6 0x4563
7000 0x8768
10000 0x3284
</pre>
<h3> How do you use if and switch statements properly? </H3>
<p>
  How do you use <a href="/blog/20201224090954.html"> if statement</a> and switch statement properly?
</p>
<p>
  Use the switch statement only if it matches an integer. The switch statement works very well with <a href="/blog/20210120133501.html"> enums</a>.
</p>
<p>
  Also, if there are many matches, it is faster than the if statement. For example, if you want to branch with 255 IDs, the switch statement is fast and suitable.
</p>

  </div>
  <div class="bottom">
    <h3>Associated Information</h3>

<div style="margin:10px 0">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="9163995495"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

  </div>
</div>

        </div>
        <div class="side">
          
        </div>
      </div>
      <div class="footer">
        <div style="font-size:16px;padding:30px 0;background:#fcfcfc;">
  This site is originally Japanese.<br>
  Perl Club starts to translate it to English.<br>
  If you find wrong expressions, you can report them using <a rel="nofollow" href="https://github.com/yuki-kimoto/en_c/issues">Github Issue</a>. 
</div>
<div class="perlri_link">
  <a rel="nofollow" href="https://perlclub.net/en">Perl Club</a>
</div>

      </div>
    </div>
  </body>
</html>
