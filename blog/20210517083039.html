<!DOCTYPE html>
<html>
  <head>
    <!-- meta -->
<!-- Google Automatic Advertising -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="icon" type="image/x-icon" href="/images/logo.png">
<link rel="stylesheet" type="text/css" href="/css/common.css">

<script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-FTCP0SKTW5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FTCP0SKTW5');
</script>

<title> sprintf function --output format string to string variable  - C Language Zemi -  All Examples are support C99 C Language</title>
<meta name="description" content="The  sprintf function  is a function that can output a format string to a string variable. The  printf function outputs to the standard output, but this output destination is  char type. Think of the sprintf function as changing a string variable declared as a  array in. The sprintf function can be used by loading  stdio.h.">
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@perlzemi" />
<meta name="twitter:title" content=" sprintf function --output format string to string variable  - C Language Zemi -  All Examples are support C99 C Language" />
<meta name="twitter:description" content="The  sprintf function  is a function that can output a format string to a string variable. The  printf function outputs to the standard output, but this output destination is  char type. Think of the sprintf function as changing a string variable declared as a  array in. The sprintf function can be used by loading  stdio.h." />
<meta name="twitter:image" content="https://en.c.perlzemi.com/images/twitter_card_large_kaeru.png" />


  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header_main">
  <h1>
    <a href="/"><img src="/images/logo.png">C Language Zemi</a>
  </h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    
  </div>
  <div class="middle">
    <div class = "bread">
  <ul itemscope itemtype = "http://schema.org/BreadcrumbList">
    <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">
      <a itemprop="item" href="/">
        <span itemprop = "name"> C language </span>
     </a>
      <meta itemprop = "position" content = "1" />
    </li>
    <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">
      <a itemprop="item" href="/library.html">
        <span itemprop = "name"> C standard library </span>
     </a>
      <meta itemprop = "position" content = "2" />
    </li>
    <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">
      <a itemprop="item" href="/library/stdio.html">
        <span itemprop = "name"> stdio.h </span>
     </a>
      <meta itemprop = "position" content = "3" />
    </li>
    <li>
      here
    </li>
  </ul>
</div>
<h2><a href="/blog/20210517083039.html"> sprintf function --output format string to string variable </a></h2>
<p>
  The <b> sprintf function </b> is a function that can output a format string to a string variable. The <a href="/blog/20210419083246.html"> printf function</a> outputs to the standard output, but this output destination is <a href="/blog/20201204103322.html"> char type. Think of the sprintf function as changing a string variable declared as a <a href="/blog/20210129143859.html"> array</a> in</a>. The sprintf function can be used by loading <a href="/blog/20210418083246.html"> stdio.h</a>.
</p>
<div style="width:calc(100% - 30px);margin:10px auto;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
       crossorigin="anonymous"></script>
  <!-- 最初の段落下 - ディスプレイ 横長 レスポンシブ -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4525414114581084"
       data-ad-slot="2828858335"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


<pre>
#include &lt;stdio.h&gt;
int sprintf(char * str, const char * format, ...);
</pre>
<p>
  The first argument is the output destination string. The second argument is the format string, which is the same as described in <a href="/blog/20210419083246.html"> printf function</a>. The third and subsequent arguments are variable-length arguments, which are the same as those explained in the printf function.
</p>
<p>
  The sprintf function is a function that can cause a buffer overrun.
</p>
<h3> Sample sprintf function </h3>
<p>
  This is a sample of the sprintf function.
</p>
<pre>
#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;

int main (void) {
  const char * name = "kimoto";
  int32_t age = 40;
  
  char message [255];
  
  sprintf(message, "I'm%s. Age is%d.", name, age);
  
  printf("%s\n", message);
}
</pre>
<p>
  This is the output result.
</p>
<pre>
I'm kimoto. Age is 40.
</pre>
<p>
  This sample does not cause a buffer overrun.
</p>
<h3> sprintf function and Buffo overrun </h3>
<p>
  I will write about the danger of the sprintf function and the buffo overrun.
</p>
<p>
  For example, consider that user input changes the value to embed in the format. For example, suppose you haven't put a length limit on a user's name in a web input form. Also assume that the length of the output destination string is short.
</p>
<pre>
#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;

int main (void) {
  const char * name = "long_long_long_name";
  int32_t age = 40;
  
  char message [16];
  
  // Buffer overrun !!!
  sprintf(message, "I'm%s. Age is%d.", name, age);
  
  printf("%s\n", message);
}

</pre>
<p>
  When a buffer overrun occurs, data is written to an unintended memory area. I'm not familiar with what kind of problem this causes, so I'll leave it to the security engineer. As an engineer writing a program, keep in mind that you shouldn't have a buffo overrun.
</p>
<p>
  There is also a snprintf function that can limit the maximum number of writes, so use it properly according to the purpose.
</p>

  </div>
  <div class="bottom">
    <h3>Associated Information</h3>

<div style="margin:10px 0">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="9163995495"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

  </div>
</div>

        </div>
        <div class="side">
          
        </div>
      </div>
      <div class="footer">
        <div style="font-size:16px;padding:30px 0;background:#fcfcfc;">
  This site is originally Japanese.<br>
  Perl Club starts to translate it to English.<br>
  If you find wrong expressions, you can report them using <a rel="nofollow" href="https://github.com/yuki-kimoto/en_c/issues">Github Issue</a>. 
</div>
<div class="perlri_link">
  <a rel="nofollow" href="https://perlclub.net/en">Perl Club</a>
</div>

      </div>
    </div>
  </body>
</html>
